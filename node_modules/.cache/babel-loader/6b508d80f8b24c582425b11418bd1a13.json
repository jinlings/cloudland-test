{"ast":null,"code":"import _objectSpread from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Form,Card,Button,Select,Input,message}from\"antd\";import{subnetsListApi}from\"../../service/subnets\";import{createGWApi,editGWInfor,getGWInforById}from\"../../service/gateways\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layoutButton={labelCol:{span:8},wrapperCol:{span:16}};var layoutForm={labelCol:{span:6},wrapperCol:{span:10}};var ModifyGateways=/*#__PURE__*/function(_Component){_inherits(ModifyGateways,_Component);var _super=_createSuper(ModifyGateways);function ModifyGateways(props){var _this2;_classCallCheck(this,ModifyGateways);_this2=_super.call(this,props);_this2.handleSubmit=function(event){console.log(\"handleSubmit:\",event);event.preventDefault();_this2.props.form.validateFieldsAndScroll(function(err,values){console.log(\"handleSubmit-values\",values);if(!err){console.log(\"handleSubmit-value-editGWInfor:\",values);console.log(\"提交\");if(_this2.props.match.params.id){console.log(\"gw-edit\",_this2.props.match.params.id,values);values.subnets=values.subnets.map(String);editGWInfor(_this2.props.match.params.id,values).then(function(res){console.log(\"gw-editGWInfor:\",res);_this2.props.history.push(\"/gateways\");});}else{values.zone=parseInt(values.zone);values.public=values.public===undefined?_this2.state.public:values.public;values.private=values.private===undefined?_this2.state.private:values.private;values.subnets=values.subnets===undefined?_this2.state.subnetsValue:values.subnets.map(String);console.log(\"submit-value\",values);createGWApi(values).then(function(res){console.log(\"handleSubmit-res-createGWApi:\",res);_this2.props.history.push(\"/gateways\");// Utils.loadData(this.state.current, this.state.pageSize)\n}).catch(function(err){console.log(\"handleSubmit-error:\",err);message.error(err.response.data.ErrorMsg);});}}else{message.error(\" input wrong information\");}});};_this2.listGateways=function(){_this2.props.history.push(\"/gateways\");};_this2.state={subnets:[],name:\"\",public:\"\",private:\"\",subnetsValue:[],isShowEdit:false,currentData:[]};if(props.match.params.id){getGWInforById(props.match.params.id).then(function(res){console.log(\"getGWInforById:\",res);_this2.setState({currentData:res,isShowEdit:true});console.log(\"getGWInforById-state:\",_this2.state.currentData);});}return _this2;}_createClass(ModifyGateways,[{key:\"componentWillMount\",value:function componentWillMount(){var _this=this;subnetsListApi().then(function(res){console.log(\"componentDidMount-orgsListApi:\",res);_this.setState({subnets:res.subnets,isLoaded:true});}).catch(function(error){_this.setState({isLoaded:false,error:error});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(Card,{title:this.state.isShowEdit?\"Edit Gateway\":\"Create New Gateway \",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:this.listGateways,children:\"Return\"}),children:/*#__PURE__*/_jsxs(Form,{layout:\"horizontal\",wrapperCol:_objectSpread({},layoutForm.wrapperCol),onSubmit:function onSubmit(e){return _this3.handleSubmit(e);},children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Name\",name:\"name\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"name\",{rules:[{required:true}],initialValue:this.state.currentData.Name})(/*#__PURE__*/_jsx(Input// ref={(c) => {\n//   this.hostname = c;\n// }}\n// disabled={this.state.isShowEdit}\n// onChange={(e) => this.setState({ hostname: e.target.value })}\n,{}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Zone\",name:\"zone\",labelCol:_objectSpread({},layoutForm.labelCol),hidden:this.state.isShowEdit,children:this.props.form.getFieldDecorator(\"zone\",{rules:[{required:!this.state.isShowEdit}]})(/*#__PURE__*/_jsx(Select,{children:/*#__PURE__*/_jsx(Select.Option,{value:\"1543\",children:\"zone0\"},\"zone\")}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Created At\",name:\"createdAt\",labelCol:_objectSpread({},layoutForm.labelCol),hidden:!this.state.isShowEdit,children:this.props.form.getFieldDecorator(\"createdAt\",{rules:[],initialValue:this.state.currentData.CreatedAt})(/*#__PURE__*/_jsx(Input,{disabled:this.state.isShowEdit,name:\"createdAt\"}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Updated At\",name:\"updatedAt\",labelCol:_objectSpread({},layoutForm.labelCol),hidden:!this.state.isShowEdit,children:this.props.form.getFieldDecorator(\"updatedAt\",{rules:[],initialValue:this.state.currentData.UpdatedAt})(/*#__PURE__*/_jsx(Input,{disabled:this.state.isShowEdit,name:\"updatedAt\"}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Public Gateways\",name:\"public\",labelCol:_objectSpread({},layoutForm.labelCol),hidden:this.state.isShowEdit,children:this.props.form.getFieldDecorator(\"public\",{rules:[]})(/*#__PURE__*/_jsx(Select,{children:this.state.subnets.map(function(item,index){return/*#__PURE__*/_jsxs(Select.Option,{value:item.Name,children:[item.Name,\" - \",item.Network]},index);})}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Private Gateway\",name:\"private\",labelCol:_objectSpread({},layoutForm.labelCol),hidden:this.state.isShowEdit,children:this.props.form.getFieldDecorator(\"private\",{rules:[]})(/*#__PURE__*/_jsx(Select,{children:this.state.subnets.map(function(item,index){return/*#__PURE__*/_jsxs(Select.Option,{value:item.Name,children:[item.Name,\" - \",item.Network]},item.ID);})}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Subnets\",name:\"subnets\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"subnets\",{rules:[],initialValue:this.state.subnets.length===0?this.state.subnets.map(function(item){return item.Name-item.Network;}):[]})(/*#__PURE__*/_jsx(Select,{mode:\"multiple\",style:{width:\"100%\"},placeholder:\"Please select\",onChange:this.handleSubChange,children:this.state.subnets.map(function(item,index){return/*#__PURE__*/_jsxs(Select.Option,{value:item.ID,children:[item.Name,\" - \",item.Network]},index);})}))}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:_objectSpread(_objectSpread({},layoutButton.wrapperCol),{},{offset:8}),labelCol:{span:6},children:this.state.isShowEdit?/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Update Gateway\"}):/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Create Gateway\"})})]})});}}]);return ModifyGateways;}(Component);export default Form.create({name:\"modifygateways\"})(ModifyGateways);","map":{"version":3,"sources":["/Users/emily/cloudland/src/pages/gateways/ModifyGateways.jsx"],"names":["React","Component","Form","Card","Button","Select","Input","message","subnetsListApi","createGWApi","editGWInfor","getGWInforById","layoutButton","labelCol","span","wrapperCol","layoutForm","ModifyGateways","props","handleSubmit","event","console","log","preventDefault","form","validateFieldsAndScroll","err","values","match","params","id","subnets","map","String","then","res","history","push","zone","parseInt","public","undefined","state","private","subnetsValue","catch","error","response","data","ErrorMsg","listGateways","name","isShowEdit","currentData","setState","_this","isLoaded","e","getFieldDecorator","rules","required","initialValue","Name","CreatedAt","UpdatedAt","item","index","Network","ID","length","width","handleSubChange","offset","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Card, Button, Select, Input, message } from \"antd\";\nimport { subnetsListApi } from \"../../service/subnets\";\nimport {\n  createGWApi,\n  editGWInfor,\n  getGWInforById,\n} from \"../../service/gateways\";\n\nconst layoutButton = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\nconst layoutForm = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 10 },\n};\nclass ModifyGateways extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subnets: [],\n      name: \"\",\n      public: \"\",\n      private: \"\",\n      subnetsValue: [],\n      isShowEdit: false,\n      currentData: [],\n    };\n    if (props.match.params.id) {\n      getGWInforById(props.match.params.id).then((res) => {\n        console.log(\"getGWInforById:\", res);\n        this.setState({\n          currentData: res,\n          isShowEdit: true,\n        });\n        console.log(\"getGWInforById-state:\", this.state.currentData);\n      });\n    }\n  }\n\n  componentWillMount() {\n    const _this = this;\n\n    subnetsListApi()\n      .then((res) => {\n        console.log(\"componentDidMount-orgsListApi:\", res);\n        _this.setState({\n          subnets: res.subnets,\n          isLoaded: true,\n        });\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  }\n\n  handleSubmit = (event) => {\n    console.log(\"handleSubmit:\", event);\n    event.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      console.log(\"handleSubmit-values\", values);\n      if (!err) {\n        console.log(\"handleSubmit-value-editGWInfor:\", values);\n        console.log(\"提交\");\n        if (this.props.match.params.id) {\n          console.log(\"gw-edit\", this.props.match.params.id, values);\n          values.subnets = values.subnets.map(String);\n          editGWInfor(this.props.match.params.id, values).then((res) => {\n            console.log(\"gw-editGWInfor:\", res);\n\n            this.props.history.push(\"/gateways\");\n          });\n        } else {\n          values.zone = parseInt(values.zone);\n          values.public =\n            values.public === undefined ? this.state.public : values.public;\n\n          values.private =\n            values.private === undefined ? this.state.private : values.private;\n\n          values.subnets =\n            values.subnets === undefined\n              ? this.state.subnetsValue\n              : values.subnets.map(String);\n          console.log(\"submit-value\", values);\n          createGWApi(values)\n            .then((res) => {\n              console.log(\"handleSubmit-res-createGWApi:\", res);\n              this.props.history.push(\"/gateways\");\n\n              // Utils.loadData(this.state.current, this.state.pageSize)\n            })\n            .catch((err) => {\n              console.log(\"handleSubmit-error:\", err);\n              message.error(err.response.data.ErrorMsg);\n            });\n        }\n      } else {\n        message.error(\" input wrong information\");\n      }\n    });\n  };\n  listGateways = () => {\n    this.props.history.push(\"/gateways\");\n  };\n  render() {\n    return (\n      <Card\n        title={this.state.isShowEdit ? \"Edit Gateway\" : \"Create New Gateway \"}\n        extra={\n          <Button type=\"primary\" onClick={this.listGateways}>\n            Return\n          </Button>\n        }\n      >\n        <Form\n          layout=\"horizontal\"\n          wrapperCol={{ ...layoutForm.wrapperCol }}\n          onSubmit={(e) => this.handleSubmit(e)}\n        >\n          <Form.Item\n            label=\"Name\"\n            name=\"name\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"name\", {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n              initialValue: this.state.currentData.Name,\n            })(\n              <Input\n              // ref={(c) => {\n              //   this.hostname = c;\n              // }}\n              // disabled={this.state.isShowEdit}\n              // onChange={(e) => this.setState({ hostname: e.target.value })}\n              />\n            )}\n          </Form.Item>\n          <Form.Item\n            label=\"Zone\"\n            name=\"zone\"\n            labelCol={{ ...layoutForm.labelCol }}\n            hidden={this.state.isShowEdit}\n          >\n            {this.props.form.getFieldDecorator(\"zone\", {\n              rules: [\n                {\n                  required: !this.state.isShowEdit,\n                },\n              ],\n            })(\n              <Select>\n                <Select.Option key=\"zone\" value=\"1543\">\n                  zone0\n                </Select.Option>\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item\n            label=\"Created At\"\n            name=\"createdAt\"\n            labelCol={{ ...layoutForm.labelCol }}\n            hidden={!this.state.isShowEdit}\n          >\n            {this.props.form.getFieldDecorator(\"createdAt\", {\n              rules: [],\n              initialValue: this.state.currentData.CreatedAt,\n            })(<Input disabled={this.state.isShowEdit} name=\"createdAt\" />)}\n          </Form.Item>\n          <Form.Item\n            label=\"Updated At\"\n            name=\"updatedAt\"\n            labelCol={{ ...layoutForm.labelCol }}\n            hidden={!this.state.isShowEdit}\n          >\n            {this.props.form.getFieldDecorator(\"updatedAt\", {\n              rules: [],\n              initialValue: this.state.currentData.UpdatedAt,\n            })(<Input disabled={this.state.isShowEdit} name=\"updatedAt\" />)}\n          </Form.Item>\n          <Form.Item\n            label=\"Public Gateways\"\n            name=\"public\"\n            labelCol={{ ...layoutForm.labelCol }}\n            hidden={this.state.isShowEdit}\n          >\n            {this.props.form.getFieldDecorator(\"public\", {\n              rules: [],\n            })(\n              <Select>\n                {this.state.subnets.map((item, index) => {\n                  return (\n                    <Select.Option key={index} value={item.Name}>\n                      {item.Name} - {item.Network}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            )}\n          </Form.Item>\n\n          <Form.Item\n            label=\"Private Gateway\"\n            name=\"private\"\n            labelCol={{ ...layoutForm.labelCol }}\n            hidden={this.state.isShowEdit}\n          >\n            {this.props.form.getFieldDecorator(\"private\", {\n              rules: [],\n            })(\n              <Select>\n                {this.state.subnets.map((item, index) => {\n                  return (\n                    <Select.Option key={item.ID} value={item.Name}>\n                      {item.Name} - {item.Network}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item\n            label=\"Subnets\"\n            name=\"subnets\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"subnets\", {\n              rules: [],\n              initialValue:\n                this.state.subnets.length === 0\n                  ? this.state.subnets.map((item) => {\n                      return item.Name - item.Network;\n                    })\n                  : [],\n            })(\n              <Select\n                mode=\"multiple\"\n                style={{ width: \"100%\" }}\n                placeholder=\"Please select\"\n                onChange={this.handleSubChange}\n              >\n                {this.state.subnets.map((item, index) => {\n                  return (\n                    <Select.Option value={item.ID} key={index}>\n                      {item.Name} - {item.Network}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            )}\n          </Form.Item>\n\n          <Form.Item\n            wrapperCol={{ ...layoutButton.wrapperCol, offset: 8 }}\n            labelCol={{ span: 6 }}\n          >\n            {this.state.isShowEdit ? (\n              <Button type=\"primary\" htmlType=\"submit\">\n                Update Gateway\n              </Button>\n            ) : (\n              <Button type=\"primary\" htmlType=\"submit\">\n                Create Gateway\n              </Button>\n            )}\n          </Form.Item>\n        </Form>\n      </Card>\n    );\n  }\n}\nexport default Form.create({ name: \"modifygateways\" })(ModifyGateways);\n"]},"metadata":{},"sourceType":"module"}