{"ast":null,"code":"import _classCallCheck from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/*\n\nCopyright <holder> All Rights Reserved\n\nSPDX-License-Identifier: Apache-2.0\n\n*/import React,{Component}from\"react\";import{Card}from\"antd\";import{hypersListApi}from\"../../service/hypers\";import DataTable from\"../../components/DataTable/DataTable\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Hypers=/*#__PURE__*/function(_Component){_inherits(Hypers,_Component);var _super=_createSuper(Hypers);function Hypers(props){var _this2;_classCallCheck(this,Hypers);_this2=_super.call(this,props);_this2.columns=[{title:\"HyperID\",dataIndex:\"ID\",width:80,align:\"center\"//render: (txt, record, index) => index + 1,\n},{title:\"Hostname\",dataIndex:\"Hostname\",align:\"center\"},{title:\"ParentID\",dataIndex:\"Parentid\",align:\"center\"},{title:\"Children\",dataIndex:\"Children\",align:\"center\"},{title:\"HostIP\",dataIndex:\"HostIP\",align:\"center\"},{title:\"Status\",dataIndex:\"Status\",align:\"center\"},{title:\"Zone\",dataIndex:\"Zone.Name\",align:\"center\"},{title:\"CPU\",dataIndex:\"Resource.Cpu\",align:\"center\"},{title:\"Memory(K)\",dataIndex:\"Resource.Memory\",align:\"center\",render:function render(text,record,index){return/*#__PURE__*/_jsxs(\"span\",{children:[record.Resource.Memory,\"/\",record.Resource.MemoryTotal]});}},{title:\"Disk(B)\",dataIndex:\"Resource.Disk\",align:\"center\",render:function render(text,record,index){return/*#__PURE__*/_jsxs(\"span\",{children:[record.Resource.Disk,\"/\",record.Resource.DiskTotal]});}}];_this2.loadData=function(page,pageSize){console.log(\"hyper-loadData~~\",page,pageSize);var _this=_assertThisInitialized(_this2);var offset=(page-1)*pageSize;var limit=pageSize;hypersListApi(offset,limit).then(function(res){console.log(\"loadData\",res);_this.setState({hypers:res.hypers,isLoaded:true,total:res.total,pageSize:limit,current:page});console.log(\"loadData-page-\",page,_this.state);}).catch(function(error){_this.setState({isLoaded:false,error:error});});};_this2.toSelectchange=function(page,num){console.log(\"toSelectchange\",page,num);var _this=_assertThisInitialized(_this2);var offset=(page-1)*num;var limit=num;console.log(\"hypers-toSelectchange~limit:\",offset,limit);hypersListApi(offset,limit).then(function(res){console.log(\"loadData\",res);_this.setState({hypers:res.hypers,isLoaded:true,total:res.total,pageSize:limit,current:page});}).catch(function(error){_this.setState({isLoaded:false,error:error});});};_this2.onPaginationChange=function(e){console.log(\"onPaginationChange\",e);_this2.loadData(e,_this2.state.pageSize);};_this2.onShowSizeChange=function(current,pageSize){console.log(\"onShowSizeChange:\",current,pageSize);//当几条一页的值改变后调用函数，current：改变显示条数时当前数据所在页；pageSize:改变后的一页显示条数\n_this2.toSelectchange(current,pageSize);};_this2.state={hypers:[],isLoaded:false,total:0,pageSize:10,offset:0,pageSizeOptions:[\"5\",\"10\",\"15\",\"20\"],current:1};return _this2;}_createClass(Hypers,[{key:\"componentWillMount\",value:function componentWillMount(){var _this=this;hypersListApi().then(function(res){_this.setState({hypers:res.hypers,isLoaded:true,total:res.total});console.log(\"hyper-hypersListApi:\",res);console.log(\"hyper-hypersListApi:\",_this.state.hypers);}).catch(function(error){_this.setState({isLoaded:false,error:error});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Card,{title:\"Hypervisors View Panel\"+\"(Total: \"+this.state.total+\")\",children:/*#__PURE__*/_jsx(DataTable,{rowKey:\"ID\",columns:this.columns,dataSource:this.state.hypers,bordered:true,total:this.state.total,pageSize:this.state.pageSize,scroll:{y:600},onPaginationChange:this.onPaginationChange,onShowSizeChange:this.onShowSizeChange,pageSizeOptions:this.state.pageSizeOptions,loading:!this.state.isLoaded})});}}]);return Hypers;}(Component);export default Hypers;","map":{"version":3,"sources":["/Users/emily/cloudland/src/pages/hypers/Hypers.jsx"],"names":["React","Component","Card","hypersListApi","DataTable","Hypers","props","columns","title","dataIndex","width","align","render","text","record","index","Resource","Memory","MemoryTotal","Disk","DiskTotal","loadData","page","pageSize","console","log","_this","offset","limit","then","res","setState","hypers","isLoaded","total","current","state","catch","error","toSelectchange","num","onPaginationChange","e","onShowSizeChange","pageSizeOptions","y"],"mappings":"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","sourcesContent":["/*\n\nCopyright <holder> All Rights Reserved\n\nSPDX-License-Identifier: Apache-2.0\n\n*/\nimport React, { Component } from \"react\";\nimport { Card } from \"antd\";\nimport { hypersListApi } from \"../../service/hypers\";\nimport DataTable from \"../../components/DataTable/DataTable\";\n\nclass Hypers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hypers: [],\n      isLoaded: false,\n      total: 0,\n      pageSize: 10,\n      offset: 0,\n      pageSizeOptions: [\"5\", \"10\", \"15\", \"20\"],\n      current: 1,\n    };\n  }\n  columns = [\n    {\n      title: \"HyperID\",\n      dataIndex: \"ID\",\n      width: 80,\n      align: \"center\",\n      //render: (txt, record, index) => index + 1,\n    },\n    {\n      title: \"Hostname\",\n      dataIndex: \"Hostname\",\n      align: \"center\",\n    },\n    {\n      title: \"ParentID\",\n      dataIndex: \"Parentid\",\n      align: \"center\",\n    },\n    {\n      title: \"Children\",\n      dataIndex: \"Children\",\n      align: \"center\",\n    },\n    {\n      title: \"HostIP\",\n      dataIndex: \"HostIP\",\n      align: \"center\",\n    },\n    {\n      title: \"Status\",\n      dataIndex: \"Status\",\n      align: \"center\",\n    },\n    {\n      title: \"Zone\",\n      dataIndex: \"Zone.Name\",\n      align: \"center\",\n    },\n    {\n      title: \"CPU\",\n      dataIndex: \"Resource.Cpu\",\n      align: \"center\",\n    },\n    {\n      title: \"Memory(K)\",\n      dataIndex: \"Resource.Memory\",\n      align: \"center\",\n      render: (text, record, index) => {\n        return (\n          <span>\n            {record.Resource.Memory}/{record.Resource.MemoryTotal}\n          </span>\n        );\n      },\n    },\n    {\n      title: \"Disk(B)\",\n      dataIndex: \"Resource.Disk\",\n      align: \"center\",\n      render: (text, record, index) => {\n        return (\n          <span>\n            {record.Resource.Disk}/{record.Resource.DiskTotal}\n          </span>\n        );\n      },\n    },\n  ];\n  componentWillMount() {\n    const _this = this;\n    hypersListApi()\n      .then((res) => {\n        _this.setState({\n          hypers: res.hypers,\n          isLoaded: true,\n          total: res.total,\n        });\n        console.log(\"hyper-hypersListApi:\", res);\n        console.log(\"hyper-hypersListApi:\", _this.state.hypers);\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  }\n  loadData = (page, pageSize) => {\n    console.log(\"hyper-loadData~~\", page, pageSize);\n    const _this = this;\n    const offset = (page - 1) * pageSize;\n    const limit = pageSize;\n    hypersListApi(offset, limit)\n      .then((res) => {\n        console.log(\"loadData\", res);\n        _this.setState({\n          hypers: res.hypers,\n          isLoaded: true,\n          total: res.total,\n          pageSize: limit,\n          current: page,\n        });\n        console.log(\"loadData-page-\", page, _this.state);\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  };\n  toSelectchange = (page, num) => {\n    console.log(\"toSelectchange\", page, num);\n    const _this = this;\n    const offset = (page - 1) * num;\n    const limit = num;\n    console.log(\"hypers-toSelectchange~limit:\", offset, limit);\n    hypersListApi(offset, limit)\n      .then((res) => {\n        console.log(\"loadData\", res);\n        _this.setState({\n          hypers: res.hypers,\n          isLoaded: true,\n          total: res.total,\n          pageSize: limit,\n          current: page,\n        });\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  };\n  onPaginationChange = (e) => {\n    console.log(\"onPaginationChange\", e);\n    this.loadData(e, this.state.pageSize);\n  };\n  onShowSizeChange = (current, pageSize) => {\n    console.log(\"onShowSizeChange:\", current, pageSize);\n    //当几条一页的值改变后调用函数，current：改变显示条数时当前数据所在页；pageSize:改变后的一页显示条数\n    this.toSelectchange(current, pageSize);\n  };\n  render() {\n    return (\n      <Card\n        title={\"Hypervisors View Panel\" + \"(Total: \" + this.state.total + \")\"}\n      >\n        <DataTable\n          rowKey=\"ID\"\n          columns={this.columns}\n          dataSource={this.state.hypers}\n          bordered\n          total={this.state.total}\n          pageSize={this.state.pageSize}\n          scroll={{ y: 600 }}\n          onPaginationChange={this.onPaginationChange}\n          onShowSizeChange={this.onShowSizeChange}\n          pageSizeOptions={this.state.pageSizeOptions}\n          loading={!this.state.isLoaded}\n        />\n      </Card>\n    );\n  }\n}\nexport default Hypers;\n"]},"metadata":{},"sourceType":"module"}