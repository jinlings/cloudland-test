{"ast":null,"code":"import _objectSpread from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Form,Card,Input,Select,Button,message}from\"antd\";import{createSecgroupApi,getSecgroupInforById,editSecgroupInfor}from\"../../service/secgroups\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layoutButton={labelCol:{span:8},wrapperCol:{span:16}};var layoutForm={labelCol:{span:6},wrapperCol:{span:10}};var ModifySecgroups=/*#__PURE__*/function(_Component){_inherits(ModifySecgroups,_Component);var _super=_createSuper(ModifySecgroups);function ModifySecgroups(props){var _this;_classCallCheck(this,ModifySecgroups);_this=_super.call(this,props);_this.listSecgroups=function(){_this.props.history.push(\"/secgroups\");};_this.handleSubmit=function(e){console.log(\"handleSubmit:\",e);e.preventDefault();_this.props.form.validateFieldsAndScroll(function(err,values){if(!err){console.log(\"handleSubmit-value:\",values);console.log(\"提交\");if(_this.props.match.params.id){//const _this = this;\neditSecgroupInfor(_this.props.match.params.id,values).then(function(res){console.log(\"editSecgroupInfor:\",res);// _this.setState({\n//   isShowEdit: ! this.state.isShowEdit,\n// });\n_this.props.history.push(\"/secgroups\");});}else{console.log(\"before-createSecgroupApi:\",values);values.isdefault=values.isdefault===undefined?_this.state.isDefault:values.isdefault;createSecgroupApi(values).then(function(res){console.log(\"handleSubmit-res-createSecgroupApi:\",res);_this.props.history.push(\"/secgroups\");}).catch(function(err){console.log(\"handleSubmit-error:\",err);});}}else{message.error(\" input wrong information\");}});};_this.state={isShowEdit:false,currentData:[],isDefault:\"\"};if(props.match.params.id){getSecgroupInforById(props.match.params.id).then(function(res){console.log(\"getSecgroupInforById:\",res);_this.setState({currentData:res,isShowEdit:true});console.log(\"getSecgroupInforById-this.state:\",_this.state);});}return _this;}_createClass(ModifySecgroups,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(Card,{title:this.state.isShowEdit?\"Edit Security Group\":\"Create New Security Group \",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:this.listSecgroups,children:\"Return\"}),children:/*#__PURE__*/_jsxs(Form,{layout:\"horizontal\",wrapperCol:_objectSpread({},layoutForm.wrapperCol),onSubmit:function onSubmit(e){return _this2.handleSubmit(e);},children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Name\",name:\"name\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"name\",{rules:[{required:true}],initialValue:this.state.currentData.Name})(/*#__PURE__*/_jsx(Input,{}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Is Default\",name:\"isdefault\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"isdefault\",{rules:[],initialValue:this.state.currentData.isDefault})(/*#__PURE__*/_jsxs(Select,{placeholder:\"no\",children:[/*#__PURE__*/_jsx(Select.Option,{value:\"yes\",children:\"yes\"},\"yes\"),/*#__PURE__*/_jsx(Select.Option,{value:\"no\",children:\"no\"},\"no\")]}))}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:_objectSpread(_objectSpread({},layoutButton.wrapperCol),{},{offset:8}),labelCol:{span:6},children:this.state.isShowEdit?/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Update Security Group\"}):/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Create Security Group\"})})]})});}}]);return ModifySecgroups;}(Component);export default Form.create({name:\"modifySecgroups\"})(ModifySecgroups);","map":{"version":3,"sources":["/Users/emily/cloudland/src/pages/secgroups/ModifySecgroups.jsx"],"names":["React","Component","Form","Card","Input","Select","Button","message","createSecgroupApi","getSecgroupInforById","editSecgroupInfor","layoutButton","labelCol","span","wrapperCol","layoutForm","ModifySecgroups","props","listSecgroups","history","push","handleSubmit","e","console","log","preventDefault","form","validateFieldsAndScroll","err","values","match","params","id","then","res","isdefault","undefined","state","isDefault","catch","error","isShowEdit","currentData","setState","getFieldDecorator","rules","required","initialValue","Name","offset","create","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Card, Input, Select, Button, message } from \"antd\";\nimport {\n  createSecgroupApi,\n  getSecgroupInforById,\n  editSecgroupInfor,\n} from \"../../service/secgroups\";\nconst layoutButton = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\nconst layoutForm = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 10 },\n};\nclass ModifySecgroups extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShowEdit: false,\n      currentData: [],\n      isDefault: \"\",\n    };\n    if (props.match.params.id) {\n      getSecgroupInforById(props.match.params.id).then((res) => {\n        console.log(\"getSecgroupInforById:\", res);\n        this.setState({\n          currentData: res,\n          isShowEdit: true,\n        });\n        console.log(\"getSecgroupInforById-this.state:\", this.state);\n      });\n    }\n  }\n  listSecgroups = () => {\n    this.props.history.push(\"/secgroups\");\n  };\n  handleSubmit = (e) => {\n    console.log(\"handleSubmit:\", e);\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        console.log(\"handleSubmit-value:\", values);\n        console.log(\"提交\");\n        if (this.props.match.params.id) {\n          //const _this = this;\n          editSecgroupInfor(this.props.match.params.id, values).then((res) => {\n            console.log(\"editSecgroupInfor:\", res);\n            // _this.setState({\n            //   isShowEdit: ! this.state.isShowEdit,\n            // });\n            this.props.history.push(\"/secgroups\");\n          });\n        } else {\n          console.log(\"before-createSecgroupApi:\", values);\n          values.isdefault =\n            values.isdefault === undefined\n              ? this.state.isDefault\n              : values.isdefault;\n          createSecgroupApi(values)\n            .then((res) => {\n              console.log(\"handleSubmit-res-createSecgroupApi:\", res);\n              this.props.history.push(\"/secgroups\");\n            })\n            .catch((err) => {\n              console.log(\"handleSubmit-error:\", err);\n            });\n        }\n      } else {\n        message.error(\" input wrong information\");\n      }\n    });\n  };\n  render() {\n    return (\n      <Card\n        title={\n          this.state.isShowEdit\n            ? \"Edit Security Group\"\n            : \"Create New Security Group \"\n        }\n        extra={\n          <Button type=\"primary\" onClick={this.listSecgroups}>\n            Return\n          </Button>\n        }\n      >\n        <Form\n          layout=\"horizontal\"\n          wrapperCol={{ ...layoutForm.wrapperCol }}\n          onSubmit={(e) => this.handleSubmit(e)}\n        >\n          <Form.Item\n            label=\"Name\"\n            name=\"name\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"name\", {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n              initialValue: this.state.currentData.Name,\n            })(<Input />)}\n          </Form.Item>\n          <Form.Item\n            label=\"Is Default\"\n            name=\"isdefault\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"isdefault\", {\n              rules: [],\n              initialValue: this.state.currentData.isDefault,\n            })(\n              <Select placeholder=\"no\">\n                <Select.Option key=\"yes\" value=\"yes\">\n                  yes\n                </Select.Option>\n                <Select.Option key=\"no\" value=\"no\">\n                  no\n                </Select.Option>\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item\n            wrapperCol={{ ...layoutButton.wrapperCol, offset: 8 }}\n            labelCol={{ span: 6 }}\n          >\n            {this.state.isShowEdit ? (\n              <Button type=\"primary\" htmlType=\"submit\">\n                Update Security Group\n              </Button>\n            ) : (\n              <Button type=\"primary\" htmlType=\"submit\">\n                Create Security Group\n              </Button>\n            )}\n          </Form.Item>\n        </Form>\n      </Card>\n    );\n  }\n}\nexport default Form.create({ name: \"modifySecgroups\" })(ModifySecgroups);\n"]},"metadata":{},"sourceType":"module"}