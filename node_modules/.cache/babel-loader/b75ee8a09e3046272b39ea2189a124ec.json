{"ast":null,"code":"import _objectSpread from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Form,Card,Button,Select,Input,message}from\"antd\";import{createFloatingipApi}from\"../../service/floatingips\";import{insListApi}from\"../../service/instances\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layoutButton={labelCol:{span:8},wrapperCol:{span:16}};var layoutForm={labelCol:{span:6},wrapperCol:{span:10}};var CreateFloatingips=/*#__PURE__*/function(_Component){_inherits(CreateFloatingips,_Component);var _super=_createSuper(CreateFloatingips);function CreateFloatingips(props){var _this2;_classCallCheck(this,CreateFloatingips);_this2=_super.call(this,props);_this2.listFloatingIps=function(){_this2.props.history.push(\"/floatingips\");};_this2.handleSubmit=function(event){console.log(\"handleSubmit-state:\",_this2.state);console.log(\"handleSubmit:\",event);event.preventDefault();_this2.props.form.validateFieldsAndScroll(function(err,values){var _this=_assertThisInitialized(_this2);if(!err){// this.setState({\n//   flavors: {\n//     Name: this.state.name,\n//     Cpu: parseInt(this.state.cpu),\n//     Memory: parseInt(this.state.memory),\n//     Disk: parseInt(this.state.disk),\n//     Swap: parseInt(this.state.swap),\n//     Ephemeral: parseInt(this.state.ephemeral),\n//   },\n// });\nvar ifaceID=[];if(values.privateip!=undefined){ifaceID.push(values.privateip);}if(values.publicip!=undefined){ifaceID.push(values.publicip);}console.log(\"提交~~~\",{ftype:values.ftype,instance:\"\".concat(values.instance),ifaceID:ifaceID});createFloatingipApi({ftype:values.ftype,instance:\"\".concat(values.instance),publicip:ifaceID}).then(function(res){console.log(\"handleSubmit-res-createFlavorApi:\",res);_this2.props.history.push(\"/flavors\");}).catch(function(err){console.log(\"handleSubmit-error:\",err);});}else{message.error(\" input wrong information\");}});};_this2.state={instances:[],publicip:\"\",privateip:\"\",ftype:[],instance:\"\"};return _this2;}_createClass(CreateFloatingips,[{key:\"componentWilMount\",value:function componentWilMount(){var _this3=this;console.log(\"componentDidMount:\",this);insListApi().then(function(res){var _this=_this3;console.log(\"componentDidMount-instances:\",res);_this.setState({instances:res.instances,isLoaded:true,pagination:{total:res.total}});}).catch(function(error){var _this=_this3;_this.setState({isLoaded:false,error:error});});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsx(Card,{title:\"Create New FloatingIp \",extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:this.listFloatingIps,children:\"Return\"}),children:/*#__PURE__*/_jsxs(Form,{layout:\"horizontal\",wrapperCol:_objectSpread({},layoutForm.wrapperCol),onSubmit:function onSubmit(e){return _this4.handleSubmit(e);},children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Instance Address\",name:\"instance\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"instance\",{rules:[{required:true}]})(/*#__PURE__*/_jsx(Select,{children:this.state.instances.map(function(item,index){console.log(\"instance~\",item,index);return/*#__PURE__*/_jsxs(Select.Option,{value:item.ID,children:[item.ID,\" - \",item.Hostname,\"-\",item.Interfaces.map(function(val){return val.Address.Address;})]},index);})}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Public IP\",name:\"publicip\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"publicip\",{rules:[]})(/*#__PURE__*/_jsx(Input,{name:\"publicip\",onChange:function onChange(e){return _this4.setState({publicip:e.target.value});}}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Private IP\",name:\"privateip\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"privateip\",{rules:[]})(/*#__PURE__*/_jsx(Input,{name:\"privateip\",onChange:function onChange(e){return _this4.setState({privateip:e.target.value});}}))}),/*#__PURE__*/_jsx(Form.Item,{label:\"Floating IP Type\",name:\"ftype\",labelCol:_objectSpread({},layoutForm.labelCol),children:this.props.form.getFieldDecorator(\"ftype\",{rules:[]})(/*#__PURE__*/_jsxs(Select,{children:[/*#__PURE__*/_jsx(Select.Option,{value:\"public\",children:\"public\"},\"public\"),/*#__PURE__*/_jsx(Select.Option,{value:\"private\",children:\"private\"},\"private\")]}))}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:_objectSpread(_objectSpread({},layoutButton.wrapperCol),{},{offset:8}),labelCol:{span:6},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Create FloatingIp\"})})]})});}}]);return CreateFloatingips;}(Component);export default Form.create({name:\"createFloatingips\"})(CreateFloatingips);","map":{"version":3,"sources":["/Users/emily/cloudland/src/pages/floatingips/CreateFloatingips.jsx"],"names":["React","Component","Form","Card","Button","Select","Input","message","createFloatingipApi","insListApi","layoutButton","labelCol","span","wrapperCol","layoutForm","CreateFloatingips","props","listFloatingIps","history","push","handleSubmit","event","console","log","state","preventDefault","form","validateFieldsAndScroll","err","values","_this","ifaceID","privateip","undefined","publicip","ftype","instance","then","res","catch","error","instances","setState","isLoaded","pagination","total","e","getFieldDecorator","rules","required","map","item","index","ID","Hostname","Interfaces","val","Address","target","value","offset","create","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Card, Button, Select, Input, message } from \"antd\";\nimport { createFloatingipApi } from \"../../service/floatingips\";\nimport { insListApi } from \"../../service/instances\";\n\nconst layoutButton = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\nconst layoutForm = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 10 },\n};\nclass CreateFloatingips extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      instances: [],\n      publicip: \"\",\n      privateip: \"\",\n      ftype: [],\n      instance: \"\",\n    };\n  }\n  componentWilMount() {\n    console.log(\"componentDidMount:\", this);\n    insListApi()\n      .then((res) => {\n        const _this = this;\n        console.log(\"componentDidMount-instances:\", res);\n        _this.setState({\n          instances: res.instances,\n          isLoaded: true,\n          pagination: {\n            total: res.total,\n          },\n        });\n      })\n      .catch((error) => {\n        const _this = this;\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  }\n  listFloatingIps = () => {\n    this.props.history.push(\"/floatingips\");\n  };\n  handleSubmit = (event) => {\n    console.log(\"handleSubmit-state:\", this.state);\n    console.log(\"handleSubmit:\", event);\n    event.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      let _this = this;\n      if (!err) {\n        // this.setState({\n        //   flavors: {\n        //     Name: this.state.name,\n        //     Cpu: parseInt(this.state.cpu),\n        //     Memory: parseInt(this.state.memory),\n        //     Disk: parseInt(this.state.disk),\n        //     Swap: parseInt(this.state.swap),\n        //     Ephemeral: parseInt(this.state.ephemeral),\n        //   },\n        // });\n\n        let ifaceID = [];\n        if (values.privateip != undefined) {\n          ifaceID.push(values.privateip);\n        }\n        if (values.publicip != undefined) {\n          ifaceID.push(values.publicip);\n        }\n\n        console.log(\"提交~~~\", {\n          ftype: values.ftype,\n          instance: `${values.instance}`,\n          ifaceID: ifaceID,\n        });\n        createFloatingipApi({\n          ftype: values.ftype,\n          instance: `${values.instance}`,\n          publicip: ifaceID,\n        })\n          .then((res) => {\n            console.log(\"handleSubmit-res-createFlavorApi:\", res);\n            this.props.history.push(\"/flavors\");\n          })\n          .catch((err) => {\n            console.log(\"handleSubmit-error:\", err);\n          });\n      } else {\n        message.error(\" input wrong information\");\n      }\n    });\n  };\n  render() {\n    return (\n      <Card\n        title={\"Create New FloatingIp \"}\n        extra={\n          <Button type=\"primary\" onClick={this.listFloatingIps}>\n            Return\n          </Button>\n        }\n      >\n        <Form\n          layout=\"horizontal\"\n          wrapperCol={{ ...layoutForm.wrapperCol }}\n          onSubmit={(e) => this.handleSubmit(e)}\n        >\n          <Form.Item\n            label=\"Instance Address\"\n            name=\"instance\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"instance\", {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n            })(\n              <Select>\n                {this.state.instances.map((item, index) => {\n                  console.log(\"instance~\", item, index);\n                  return (\n                    <Select.Option key={index} value={item.ID}>\n                      {item.ID} - {item.Hostname}-\n                      {item.Interfaces.map((val) => {\n                        return val.Address.Address;\n                      })}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item\n            label=\"Public IP\"\n            name=\"publicip\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"publicip\", {\n              rules: [],\n            })(\n              <Input\n                name=\"publicip\"\n                onChange={(e) => this.setState({ publicip: e.target.value })}\n              />\n            )}\n          </Form.Item>\n          <Form.Item\n            label=\"Private IP\"\n            name=\"privateip\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"privateip\", {\n              rules: [],\n            })(\n              <Input\n                name=\"privateip\"\n                onChange={(e) => this.setState({ privateip: e.target.value })}\n              />\n            )}\n          </Form.Item>\n\n          <Form.Item\n            label=\"Floating IP Type\"\n            name=\"ftype\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"ftype\", {\n              rules: [],\n            })(\n              <Select>\n                <Select.Option key=\"public\" value=\"public\">\n                  public\n                </Select.Option>\n\n                <Select.Option key=\"private\" value=\"private\">\n                  private\n                </Select.Option>\n              </Select>\n            )}\n          </Form.Item>\n\n          <Form.Item\n            wrapperCol={{ ...layoutButton.wrapperCol, offset: 8 }}\n            labelCol={{ span: 6 }}\n          >\n            {\n              <Button type=\"primary\" htmlType=\"submit\">\n                Create FloatingIp\n              </Button>\n            }\n          </Form.Item>\n        </Form>\n      </Card>\n    );\n  }\n}\nexport default Form.create({ name: \"createFloatingips\" })(CreateFloatingips);\n"]},"metadata":{},"sourceType":"module"}