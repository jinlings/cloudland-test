{"ast":null,"code":"var _jsxFileName = \"/Users/emily/cloudland/src/pages/users/ModifyUser.jsx\";\n\n/*\n\nCopyright <holder> All Rights Reserved\n\nSPDX-License-Identifier: Apache-2.0\n\n*/\nimport React, { Component } from \"react\";\nimport { Form, Card, Input, Select, Button, message } from \"antd\";\nimport { getUserInforById, editUserInfor } from \"../../service/users\";\nimport { createSubApi, editSubInfor, getSubInforById } from \"../../service/subnets\"; // import \"./users.css\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst layoutButton = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst layoutForm = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 10\n  },\n  LayoutType: \"horizontal\"\n};\n\nclass ModifyUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.listUsers = () => {\n      this.props.history.push(\"/users\");\n    };\n\n    this.handleSubmit = e => {\n      console.log(\"handleSubmit:\", e);\n      e.preventDefault();\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          console.log(\"handleSubmit-value:\", values);\n          console.log(\"提交\"); //const _this = this;\n\n          editUserInfor(this.props.match.params.id, values).then(res => {\n            console.log(\"editUserInfor:\", res);\n            this.props.history.push(\"/users\");\n          });\n        } else {\n          message.error(\" input wrong information\");\n        }\n      });\n    };\n\n    console.log(\"ModifyUser~~\", props);\n    this.state = {\n      isShowEdit: false,\n      currentData: [],\n      members: []\n    };\n    let that = this;\n\n    if (props.match.params.id) {\n      getUserInforById(props.match.params.id).then(res => {\n        console.log(\"getUserInforById-res:\", res);\n        that.setState({\n          currentData: res,\n          members: res.Members,\n          isShowEdit: true\n        }, () => {\n          console.log(\"getUserInforById~state.currentData:\", this.state.currentData);\n        });\n        console.log(\"getUserInforById~state:\", this.state);\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      title: \"Edit Registry\",\n      extra: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: this.listUsers,\n        children: \"Return\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        layout: { ...layoutForm.LayoutType\n        },\n        wrapperCol: { ...layoutForm.wrapperCol\n        },\n        onSubmit: e => this.handleSubmit(e),\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Password\",\n          name: \"password\",\n          labelCol: { ...layoutForm.labelCol\n          },\n          children: this.props.form.getFieldDecorator(\"password\", {\n            rules: [{\n              required: true\n            }],\n            initialValue: this.state.currentData.password\n          })( /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 16\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Organizations\",\n          name: \"members\",\n          labelCol: { ...layoutForm.labelCol\n          },\n          children: this.props.form.getFieldDecorator(\"members\", {\n            rules: [{\n              required: true\n            }],\n            initialValue: this.state.members.map(item => {\n              console.log(\"item-name\", item);\n\n              if (item.OrgName !== undefined) {\n                return item.OrgName;\n              }\n            })\n          })( /*#__PURE__*/_jsxDEV(Select, {\n            mode: \"tags\",\n            style: {\n              width: \"100%\"\n            },\n            placeholder: \"Please select\" // onChange={this.handleChange}\n            ,\n            children: this.state.members.map((item, i) => {\n              if (item.OrgName !== undefined) {\n                return /*#__PURE__*/_jsxDEV(Select.Option, {\n                  value: item.OrgName,\n                  children: item.OrgName\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 23\n                }, this);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          wrapperCol: { ...layoutButton.wrapperCol,\n            offset: 8\n          },\n          labelCol: {\n            span: 6\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            children: \"Update Registry\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Form.create({\n  name: \"modifyUser\"\n})(ModifyUser);","map":{"version":3,"sources":["/Users/emily/cloudland/src/pages/users/ModifyUser.jsx"],"names":["React","Component","Form","Card","Input","Select","Button","message","getUserInforById","editUserInfor","createSubApi","editSubInfor","getSubInforById","layoutButton","labelCol","span","wrapperCol","layoutForm","LayoutType","ModifyUser","constructor","props","listUsers","history","push","handleSubmit","e","console","log","preventDefault","form","validateFieldsAndScroll","err","values","match","params","id","then","res","error","state","isShowEdit","currentData","members","that","setState","Members","render","getFieldDecorator","rules","required","initialValue","password","map","item","OrgName","undefined","width","i","offset","create","name"],"mappings":"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","sourcesContent":["/*\n\nCopyright <holder> All Rights Reserved\n\nSPDX-License-Identifier: Apache-2.0\n\n*/\nimport React, { Component } from \"react\";\nimport { Form, Card, Input, Select, Button, message } from \"antd\";\nimport { getUserInforById, editUserInfor } from \"../../service/users\";\nimport {\n  createSubApi,\n  editSubInfor,\n  getSubInforById,\n} from \"../../service/subnets\";\n// import \"./users.css\";\nconst layoutButton = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\nconst layoutForm = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 10 },\n  LayoutType: \"horizontal\",\n};\nclass ModifyUser extends Component {\n  constructor(props) {\n    super(props);\n    console.log(\"ModifyUser~~\", props);\n    this.state = {\n      isShowEdit: false,\n      currentData: [],\n      members: [],\n    };\n    let that = this;\n    if (props.match.params.id) {\n      getUserInforById(props.match.params.id).then((res) => {\n        console.log(\"getUserInforById-res:\", res);\n        that.setState(\n          {\n            currentData: res,\n            members: res.Members,\n            isShowEdit: true,\n          },\n          () => {\n            console.log(\n              \"getUserInforById~state.currentData:\",\n              this.state.currentData\n            );\n          }\n        );\n\n        console.log(\"getUserInforById~state:\", this.state);\n      });\n    }\n  }\n\n  listUsers = () => {\n    this.props.history.push(\"/users\");\n  };\n  handleSubmit = (e) => {\n    console.log(\"handleSubmit:\", e);\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        console.log(\"handleSubmit-value:\", values);\n        console.log(\"提交\");\n        //const _this = this;\n        editUserInfor(this.props.match.params.id, values).then((res) => {\n          console.log(\"editUserInfor:\", res);\n\n          this.props.history.push(\"/users\");\n        });\n      } else {\n        message.error(\" input wrong information\");\n      }\n    });\n  };\n\n  render() {\n    return (\n      <Card\n        title={\"Edit Registry\"}\n        extra={\n          <Button type=\"primary\" onClick={this.listUsers}>\n            Return\n          </Button>\n        }\n      >\n        <Form\n          layout={{ ...layoutForm.LayoutType }}\n          wrapperCol={{ ...layoutForm.wrapperCol }}\n          onSubmit={(e) => this.handleSubmit(e)}\n        >\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"password\", {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n              initialValue: this.state.currentData.password,\n            })(<Input />)}\n          </Form.Item>\n          <Form.Item\n            label=\"Organizations\"\n            name=\"members\"\n            labelCol={{ ...layoutForm.labelCol }}\n          >\n            {this.props.form.getFieldDecorator(\"members\", {\n              rules: [\n                {\n                  required: true,\n                },\n              ],\n              initialValue: this.state.members.map((item) => {\n                console.log(\"item-name\", item);\n                if (item.OrgName !== undefined) {\n                  return item.OrgName;\n                }\n              }),\n            })(\n              <Select\n                mode=\"tags\"\n                style={{ width: \"100%\" }}\n                placeholder=\"Please select\"\n                // onChange={this.handleChange}\n              >\n                {this.state.members.map((item, i) => {\n                  if (item.OrgName !== undefined) {\n                    return (\n                      <Select.Option key={i} value={item.OrgName}>\n                        {item.OrgName}\n                      </Select.Option>\n                    );\n                  }\n                })}\n              </Select>\n            )}\n          </Form.Item>\n\n          <Form.Item\n            wrapperCol={{ ...layoutButton.wrapperCol, offset: 8 }}\n            labelCol={{ span: 6 }}\n          >\n            {\n              <Button type=\"primary\" htmlType=\"submit\">\n                Update Registry\n              </Button>\n            }\n          </Form.Item>\n        </Form>\n      </Card>\n    );\n  }\n}\nexport default Form.create({ name: \"modifyUser\" })(ModifyUser);\n"]},"metadata":{},"sourceType":"module"}