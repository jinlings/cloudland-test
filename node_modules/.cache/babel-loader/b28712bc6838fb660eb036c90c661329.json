{"ast":null,"code":"import _classCallCheck from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/emily/cloudland/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/*\n\nCopyright <holder> All Rights Reserved\n\nSPDX-License-Identifier: Apache-2.0\n\n*/import React,{Component}from\"react\";import{Card,Button,Popconfirm,message}from\"antd\";import{secrulesListApi,delSecruleInfor}from\"../../service/secrules\";import DataTable from\"../../components/DataTable/DataTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Secrules=/*#__PURE__*/function(_Component){_inherits(Secrules,_Component);var _super=_createSuper(Secrules);function Secrules(props){var _this2;_classCallCheck(this,Secrules);_this2=_super.call(this,props);_this2.columns=[{title:\"ID\",dataIndex:\"ID\",key:\"ID\",width:80,align:\"center\"// render: (href) => <a>{href}</a>,\n},{title:\"SecurityGroup\",dataIndex:\"Secgroup\",align:\"center\"// render: (href) => <a>{href}</a>,\n},{title:\"RemoteIp\",dataIndex:\"RemoteIp\",align:\"center\"},{title:\"Direction\",dataIndex:\"Direction\",align:\"center\"},{title:\"Protocol\",dataIndex:\"Protocol\",align:\"center\"},{title:\"PortMin|Type\",dataIndex:\"PortMin\",align:\"center\"},{title:\"PortMax|Type\",dataIndex:\"PortMax\",align:\"center\"},{title:\"Action\",align:\"center\",render:function render(txt,record,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{style:{marginTop:\"10px\"},type:\"primary\",size:\"small\",onClick:function onClick(){console.log(\"onClick:\",record);console.log(\"onClick-Secgroup:\",record.Secgroup);// this.setState({\n//   sgID: record.Secgroup,\n// });\nconsole.log(\"onClick-state.sgID:\",_this2.state.sgID);_this2.props.history.push(\"/secgroups/\".concat(record.Secgroup,\"/secrules/new/\")+record.ID// `/secgroups/${this.state.sgID}/secrules/new/` + record.ID\n);},children:\"Edit\"}),/*#__PURE__*/_jsx(Popconfirm,{title:\"Are you sure to delete?\",onCancel:function onCancel(){console.log(\"cancelled\");},onConfirm:function onConfirm(){console.log(\"onClick-delete:\",record);console.log(\"onClick-delete-record.Secgroup:\",record.Secgroup);delSecruleInfor(record.Secgroup,record.ID).then(function(res){message.success(res.Msg);_this2.loadData(_this2.state.current,_this2.state.pageSize);console.log(\"用户~~\",_this2.state);});},children:/*#__PURE__*/_jsx(Button,{style:{margin:\"5px\",marginRight:\"0px\",marginTop:\"10px\"},type:\"danger\",size:\"small\",children:\"Delete\"})})]});}}];_this2.createSecrules=function(){console.log(\"createSecrules:\",_this2.props);_this2.props.history.push(\"/secgroups/\".concat(_this2.props.match.params.id,\"/secrules/new\"));};_this2.listSecgroups=function(){_this2.props.history.push(\"/secgroups\");};_this2.loadData=function(page,pageSize){console.log(\"loadData~~\",page,pageSize);var _this=_assertThisInitialized(_this2);var offset=(page-1)*pageSize;var limit=pageSize;var sgID=_this2.props.match.params.id;secrulesListApi(sgID,{offset:offset,limit:limit}).then(function(res){console.log(\"loadData\",res);_this.setState({secrules:res.secrules,isLoaded:true,total:res.total,pageSize:limit,current:page});console.log(\"loadData-page-\",page,_this.state);}).catch(function(error){_this.setState({isLoaded:false,error:error});});};_this2.toSelectchange=function(page,num){console.log(\"toSelectchange\",page,num);var _this=_assertThisInitialized(_this2);var offset=(page-1)*num;var limit=num;var sgID=_this2.props.match.params.id;// console.log(\"toSelectchange~limit:\", sgID, offset, limit);\nsecrulesListApi(sgID,{offset:offset,limit:limit}).then(function(res){console.log(\"loadData-toSelectchange\",res);_this.setState({secrules:res.secrules,isLoaded:true,total:res.total,pageSize:limit});}).catch(function(error){_this.setState({isLoaded:false,error:error});});};_this2.onPaginationChange=function(e){console.log(\"onPaginationChange\",e);console.log(\"onPaginationChange-pageSize\",_this2.state.pageSize);_this2.loadData(e,_this2.state.pageSize);};_this2.onShowSizeChange=function(current,pageSize){console.log(\"onShowSizeChange:\",current,pageSize);//当几条一页的值改变后调用函数，current：改变显示条数时当前数据所在页；pageSize:改变后的一页显示条数\n_this2.toSelectchange(current,pageSize);};console.log(\"Secrule.props:\",_this2.props);_this2.state={secrules:[],sgID:\"\",isLoaded:false,total:0,pageSize:10,offset:0,pageSizeOptions:[\"5\",\"10\",\"15\",\"20\"],current:1};return _this2;}_createClass(Secrules,[{key:\"componentWillMount\",value://组件初始化的时候执行\nfunction componentWillMount(){var _this=this;console.log(\"componentWillMount:\",this);secrulesListApi(this.props.match.params.id).then(function(res){_this.setState({secrules:res.secrules,isLoaded:true,total:res.total});console.log(res);}).catch(function(error){_this.setState({isLoaded:false,error:error});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Card,{title:\"Security Group Rules Manage Panel\"+\"(Total: \"+this.state.total+\")\",extra:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button// style={{ margin: \"0 1rem\" }}\n,{type:\"primary\",size:\"small\",onClick:this.createSecrules,children:\"Create\"}),/*#__PURE__*/_jsx(Button,{style:{marginLeft:\"10px\"},type:\"primary\",size:\"small\",onClick:this.listSecgroups,children:\"Return\"})]}),children:/*#__PURE__*/_jsx(DataTable,{rowKey:\"ID\",columns:this.columns,dataSource:this.state.secrules,bordered:true,total:this.state.total,pageSize:this.state.pageSize,scroll:{y:600},onPaginationChange:this.onPaginationChange,onShowSizeChange:this.onShowSizeChange,pageSizeOptions:this.state.pageSizeOptions,loading:!this.state.isLoaded})});}}]);return Secrules;}(Component);export default Secrules;","map":{"version":3,"sources":["/Users/emily/cloudland/src/pages/secrules/Secrules.jsx"],"names":["React","Component","Card","Button","Popconfirm","message","secrulesListApi","delSecruleInfor","DataTable","Secrules","props","columns","title","dataIndex","key","width","align","render","txt","record","index","marginTop","console","log","Secgroup","state","sgID","history","push","ID","then","res","success","Msg","loadData","current","pageSize","margin","marginRight","createSecrules","match","params","id","listSecgroups","page","_this","offset","limit","setState","secrules","isLoaded","total","catch","error","toSelectchange","num","onPaginationChange","e","onShowSizeChange","pageSizeOptions","marginLeft","y"],"mappings":"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","sourcesContent":["/*\n\nCopyright <holder> All Rights Reserved\n\nSPDX-License-Identifier: Apache-2.0\n\n*/\nimport React, { Component } from \"react\";\nimport { Card, Button, Popconfirm, message } from \"antd\";\nimport { secrulesListApi, delSecruleInfor } from \"../../service/secrules\";\nimport DataTable from \"../../components/DataTable/DataTable\";\n\nclass Secrules extends Component {\n  constructor(props) {\n    super(props);\n    console.log(\"Secrule.props:\", this.props);\n    this.state = {\n      secrules: [],\n      sgID: \"\",\n      isLoaded: false,\n      total: 0,\n      pageSize: 10,\n      offset: 0,\n      pageSizeOptions: [\"5\", \"10\", \"15\", \"20\"],\n      current: 1,\n    };\n  }\n  columns = [\n    {\n      title: \"ID\",\n      dataIndex: \"ID\",\n      key: \"ID\",\n      width: 80,\n      align: \"center\",\n      // render: (href) => <a>{href}</a>,\n    },\n    {\n      title: \"SecurityGroup\",\n      dataIndex: \"Secgroup\",\n      align: \"center\",\n      // render: (href) => <a>{href}</a>,\n    },\n    {\n      title: \"RemoteIp\",\n      dataIndex: \"RemoteIp\",\n      align: \"center\",\n    },\n    {\n      title: \"Direction\",\n      dataIndex: \"Direction\",\n      align: \"center\",\n    },\n    {\n      title: \"Protocol\",\n      dataIndex: \"Protocol\",\n      align: \"center\",\n    },\n    {\n      title: \"PortMin|Type\",\n      dataIndex: \"PortMin\",\n      align: \"center\",\n    },\n    {\n      title: \"PortMax|Type\",\n      dataIndex: \"PortMax\",\n      align: \"center\",\n    },\n    {\n      title: \"Action\",\n      align: \"center\",\n      render: (txt, record, index) => {\n        return (\n          <div>\n            <Button\n              style={{\n                marginTop: \"10px\",\n              }}\n              type=\"primary\"\n              size=\"small\"\n              onClick={() => {\n                console.log(\"onClick:\", record);\n                console.log(\"onClick-Secgroup:\", record.Secgroup);\n                // this.setState({\n                //   sgID: record.Secgroup,\n                // });\n                console.log(\"onClick-state.sgID:\", this.state.sgID);\n                this.props.history.push(\n                  `/secgroups/${record.Secgroup}/secrules/new/` + record.ID\n                  // `/secgroups/${this.state.sgID}/secrules/new/` + record.ID\n                );\n              }}\n            >\n              Edit\n            </Button>\n            <Popconfirm\n              title=\"Are you sure to delete?\"\n              onCancel={() => {\n                console.log(\"cancelled\");\n              }}\n              onConfirm={() => {\n                console.log(\"onClick-delete:\", record);\n                console.log(\"onClick-delete-record.Secgroup:\", record.Secgroup);\n\n                delSecruleInfor(record.Secgroup, record.ID).then((res) => {\n                  message.success(res.Msg);\n                  this.loadData(this.state.current, this.state.pageSize);\n                  console.log(\"用户~~\", this.state);\n                });\n              }}\n            >\n              <Button\n                style={{\n                  margin: \"5px\",\n                  marginRight: \"0px\",\n                  marginTop: \"10px\",\n                }}\n                type=\"danger\"\n                size=\"small\"\n              >\n                Delete\n              </Button>\n            </Popconfirm>\n          </div>\n        );\n      },\n    },\n  ];\n  //组件初始化的时候执行\n  componentWillMount() {\n    const _this = this;\n    console.log(\"componentWillMount:\", this);\n    secrulesListApi(this.props.match.params.id)\n      .then((res) => {\n        _this.setState({\n          secrules: res.secrules,\n          isLoaded: true,\n          total: res.total,\n        });\n        console.log(res);\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  }\n  createSecrules = () => {\n    console.log(\"createSecrules:\", this.props);\n    this.props.history.push(\n      `/secgroups/${this.props.match.params.id}/secrules/new`\n    );\n  };\n  listSecgroups = () => {\n    this.props.history.push(\"/secgroups\");\n  };\n  loadData = (page, pageSize) => {\n    console.log(\"loadData~~\", page, pageSize);\n    const _this = this;\n    const offset = (page - 1) * pageSize;\n    const limit = pageSize;\n    const sgID = this.props.match.params.id;\n    secrulesListApi(sgID, { offset, limit })\n      .then((res) => {\n        console.log(\"loadData\", res);\n        _this.setState({\n          secrules: res.secrules,\n          isLoaded: true,\n          total: res.total,\n          pageSize: limit,\n          current: page,\n        });\n        console.log(\"loadData-page-\", page, _this.state);\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  };\n  toSelectchange = (page, num) => {\n    console.log(\"toSelectchange\", page, num);\n    const _this = this;\n    const offset = (page - 1) * num;\n    const limit = num;\n    const sgID = this.props.match.params.id;\n\n    // console.log(\"toSelectchange~limit:\", sgID, offset, limit);\n    secrulesListApi(sgID, { offset, limit })\n      .then((res) => {\n        console.log(\"loadData-toSelectchange\", res);\n        _this.setState({\n          secrules: res.secrules,\n          isLoaded: true,\n          total: res.total,\n          pageSize: limit,\n        });\n      })\n      .catch((error) => {\n        _this.setState({\n          isLoaded: false,\n          error: error,\n        });\n      });\n  };\n  onPaginationChange = (e) => {\n    console.log(\"onPaginationChange\", e);\n    console.log(\"onPaginationChange-pageSize\", this.state.pageSize);\n    this.loadData(e, this.state.pageSize);\n  };\n  onShowSizeChange = (current, pageSize) => {\n    console.log(\"onShowSizeChange:\", current, pageSize);\n    //当几条一页的值改变后调用函数，current：改变显示条数时当前数据所在页；pageSize:改变后的一页显示条数\n    this.toSelectchange(current, pageSize);\n  };\n  render() {\n    return (\n      <Card\n        title={\n          \"Security Group Rules Manage Panel\" +\n          \"(Total: \" +\n          this.state.total +\n          \")\"\n        }\n        extra={\n          <div>\n            <Button\n              // style={{ margin: \"0 1rem\" }}\n              type=\"primary\"\n              size=\"small\"\n              onClick={this.createSecrules}\n            >\n              Create\n            </Button>\n            <Button\n              style={{\n                marginLeft: \"10px\",\n              }}\n              type=\"primary\"\n              size=\"small\"\n              onClick={this.listSecgroups}\n            >\n              Return\n            </Button>\n          </div>\n        }\n      >\n        <DataTable\n          rowKey=\"ID\"\n          columns={this.columns}\n          dataSource={this.state.secrules}\n          bordered\n          total={this.state.total}\n          pageSize={this.state.pageSize}\n          scroll={{ y: 600 }}\n          onPaginationChange={this.onPaginationChange}\n          onShowSizeChange={this.onShowSizeChange}\n          pageSizeOptions={this.state.pageSizeOptions}\n          loading={!this.state.isLoaded}\n        />\n      </Card>\n    );\n  }\n}\nexport default Secrules;\n"]},"metadata":{},"sourceType":"module"}